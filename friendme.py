import telebot
import random
import sqlite3
import datetime
from telebot import types
import os
from dotenv import load_dotenv,find_dotenv

load_dotenv(find_dotenv())

print('bot is activated üó∏')

bot = telebot.TeleBot(os.getenv('TOKEN'))

connect = sqlite3.connect('friendMe.db', check_same_thread=False)

lower = "abcdfghjklmnpqrstvwxz"
upper = "ABCDFGHJKLMNPQRSTVWXZ"
numbers = "0123456789"
string = lower + upper + numbers
lenght = 16
link = "".join(random.sample(string,lenght))
admin_id = 1900666417


def init_bot():
    
    cursor = connect.cursor()
    cursor.execute("""CREATE TABLE IF NOT EXISTS users(
               id integer PRIMARY KEY AUTOINCREMENT,
               tg_id integer,
               user_name varchar,
               ref_id number,
               date date
           )""")
    connect.commit()

    cursor.execute("""CREATE TABLE IF NOT EXISTS images(
            id integer PRIMARY KEY AUTOINCREMENT,
            id_image integer,
            from_id integer,
            to_id integer,
            date date
    )""")
    connect.commit()


init_bot()


def auth_user(chat_id, username, ref_id=None):

    cursor = connect.cursor()
    cursor.execute(f"SELECT tg_id FROM users WHERE tg_id={chat_id}")
    data = cursor.fetchone()

    if data is None:
        cursor.execute("INSERT INTO users VALUES(?,?,?,?,?);", (None, chat_id, username, ref_id, datetime.datetime.now()))
        connect.commit()

    else:
        if ref_id is not None:
            cursor.execute(f"UPDATE users SET ref_id='{ref_id}' WHERE tg_id={chat_id}")
            connect.commit()

    cursor.execute(f"SELECT * FROM users WHERE tg_id={chat_id}")
    User = cursor.fetchone()

    print("User Data: ", User)

    return User

#–ú–µ–Ω—é –°—Ç–∞—Ä—Ç
@bot.message_handler(commands=['start'])
def start(message):

    markup = types.ReplyKeyboardMarkup(resize_keyboard=True,row_width=2)
    start_button1 = types.KeyboardButton('üåÅ –ú–û–ò –§–û–¢–û')
    start_button2 = types.KeyboardButton('üì® –û–ë–†–ê–¢–ù–ê–Ø –°–í–Ø–ó–¨')
    start_button3 = types.KeyboardButton('‚õìÔ∏è –û–¢–ü–†–ê–í–ò–¢–¨ –°–°–´–õ–ö–£ –î–†–£–ì–£')
    start_button4 = types.KeyboardButton('üìï –û –ù–ê–°')
    markup.add(start_button1,start_button3,start_button2,start_button4)

    ref_id = None
    ref_id_arr = (message.text).split(' ')
    witch_ref_link = False

    if len(ref_id_arr) > 1:
        ref_id = ref_id_arr[1]
        print("–∫—Ç–æ –ø—Ä–∏–≥–ª–∞—Å–∏–ª:", ref_id)
        witch_ref_link = True

    User = auth_user(message.from_user.id, message.from_user.username, ref_id)

    if witch_ref_link == True:
        markup = types.InlineKeyboardMarkup()
        linkbutton = types.InlineKeyboardButton(text='‚ùå –û—Ç–º–µ–Ω–∞' ,callback_data='call_linkbutton')
        markup.add(linkbutton)
        bot.send_message(message.chat.id, f'<b>–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ–º —Ç–µ–±—è –¥–æ—Ä–æ–≥–æ–π –¥—Ä—É–≥!üëã</b>\n–° –ø–æ–º–æ—â—å—é –Ω–∞—à–µ–≥–æ –±–æ—Ç–∞ —Ç—ã –º–æ–∂–µ—à—å —Å–æ –≤—Å–µ—Ö —Å–≤–æ–∏—Ö –¥—Ä—É–∑–µ–π —Å–æ–±—Ä–∞—Ç—å —Å–æ–≤–º–µ—Å—Ç–Ω—ã–µ —Ñ–æ—Ç–æ –∏ –≤–∏–¥–µ–æ —Å —Ç–æ–±–æ–π –∏ –≤—Å–ø–æ–º–Ω–∏—Ç—å –∑–∞–±—ã—Ç—ã–µ –∏ —Å–º–µ—à–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã!\n\n–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:\n1Ô∏è‚É£–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –≤ –º–µ–Ω—é "–æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É –¥—Ä—É–≥—É"\n2Ô∏è‚É£–í—ã–±–µ—Ä–∏—Ç–µ "–ü–æ–¥–µ–ª–∏—Ç—å—Å—è –∏—Å—Ç–æ—Ä–∏–µ–π Instagram"\n3Ô∏è‚É£ÔªøÔªø–î–æ–±–∞–≤—å—Ç–µ —Å–µ–±–µ –∏—Å—Ç–æ—Ä–∏—é –≤ –∏–Ω—Å—Ç–∞–≥—Ä–∞–º –∫–∞–∫ —É–∫–∞–∑–∞–Ω–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∫–Ω–æ–ø–∫–µ\n4Ô∏è‚É£–í—Å–µ —Ñ–æ—Ç–æ –∫–æ—Ç–æ—Ä—ã–µ –æ—Ç–ø—Ä–∞–≤—è—Ç –¥—Ä—É–∑—å—è –º—ã –±—É–¥–µ–º –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å –≤ —Ä–∞–∑–¥–µ–ª–µ "–ú–æ–∏ —Ñ–æ—Ç–æ"\n\n–ö–∞–∫ —Ç–æ–ª—å–∫–æ –∫—Ç–æ-—Ç–æ –∏–∑ —Ç–≤–æ–∏—Ö –¥—Ä—É–∑–µ–π –æ—Ç–ø—Ä–∞–≤–∏—Ç —á—Ç–æ-—Ç–æ –ø–æ —Å—Å—ã–ª–∫–µ –º—ã –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Ç–µ–±–µ –æ–± —ç—Ç–æ–º —Å–∫–∞–∂–µ–ºüòä\n\n\n<b>–¢—ã –ø–µ—Ä–µ—à—ë–ª –ø–æ —Å—Å—ã–ª–∫–µ {User[2]} –æ—Ç–ø—Ä–∞–≤—å —Å—é–¥–∞ –≤ —á–∞—Ç –≤–∞—à–∏ —Å–æ–≤–º–µ—Å—Ç–Ω—ã–µ —Ñ–æ—Ç–æ, –º—ã –∏—Ö –ø–µ—Ä–µ—à–ª—ë–º –∫ {User[2]}, –Ω–æ —á—Ç–æ–±—ã –æ–Ω —á—Ç–æ-—Ç–æ —É–≤–∏–¥–µ–ª, –µ–º—É –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —á–µ–º-—Ç–æ –ø–æ–¥–µ–ª–∏—Ç—å—Å—è —Å —Ç–æ–±–æ–π –≤ –æ—Ç–≤–µ—Ç üôÇ</b>',parse_mode='html',reply_markup=markup)
    else:
        bot.send_message(message.chat.id, '<b>–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ–º —Ç–µ–±—è –¥–æ—Ä–æ–≥–æ–π –¥—Ä—É–≥!üëã</b>\n–° –ø–æ–º–æ—â—å—é –Ω–∞—à–µ–≥–æ –±–æ—Ç–∞ —Ç—ã –º–æ–∂–µ—à—å —Å–æ –≤—Å–µ—Ö —Å–≤–æ–∏—Ö –¥—Ä—É–∑–µ–π —Å–æ–±—Ä–∞—Ç—å —Å–æ–≤–º–µ—Å—Ç–Ω—ã–µ —Ñ–æ—Ç–æ –∏ –≤–∏–¥–µ–æ —Å —Ç–æ–±–æ–π –∏ –≤—Å–ø–æ–º–Ω–∏—Ç—å –∑–∞–±—ã—Ç—ã–µ –∏ —Å–º–µ—à–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã!\n\n–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:\n1Ô∏è‚É£–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –≤ –º–µ–Ω—é "–æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É –¥—Ä—É–≥—É"\n2Ô∏è‚É£–í—ã–±–µ—Ä–∏—Ç–µ "–ü–æ–¥–µ–ª–∏—Ç—å—Å—è –∏—Å—Ç–æ—Ä–∏–µ–π Instagram"\n3Ô∏è‚É£ÔªøÔªø–î–æ–±–∞–≤—å—Ç–µ —Å–µ–±–µ –∏—Å—Ç–æ—Ä–∏—é –≤ –∏–Ω—Å—Ç–∞–≥—Ä–∞–º –∫–∞–∫ —É–∫–∞–∑–∞–Ω–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∫–Ω–æ–ø–∫–µ\n4Ô∏è‚É£–í—Å–µ —Ñ–æ—Ç–æ –∫–æ—Ç–æ—Ä—ã–µ –æ—Ç–ø—Ä–∞–≤—è—Ç –¥—Ä—É–∑—å—è –º—ã –±—É–¥–µ–º –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å –≤ —Ä–∞–∑–¥–µ–ª–µ "–ú–æ–∏ —Ñ–æ—Ç–æ"\n\n–ö–∞–∫ —Ç–æ–ª—å–∫–æ –∫—Ç–æ-—Ç–æ –∏–∑ —Ç–≤–æ–∏—Ö –¥—Ä—É–∑–µ–π –æ—Ç–ø—Ä–∞–≤–∏—Ç —á—Ç–æ-—Ç–æ –ø–æ —Å—Å—ã–ª–∫–µ –º—ã –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Ç–µ–±–µ –æ–± —ç—Ç–æ–º —Å–∫–∞–∂–µ–ºüòä',parse_mode='html',reply_markup=markup)

@bot.message_handler(content_types=['text'])
def chat_message(message):
    User = auth_user(message.from_user.id, message.from_user.username)
    ref_id = message.chat.id
    if message.text == 'üåÅ –ú–û–ò –§–û–¢–û':
        markup = types.InlineKeyboardMarkup(row_width=2)
        item_my_photo1 = types.InlineKeyboardButton(text='–û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ –æ—Ç–≤–µ—Ç',callback_data='itemmyphoto1')
        item_my_photo2 = types.InlineKeyboardButton(text='–î–∞–ª–µ–µ',callback_data='itemmyphoto2')
        item_my_photo3 = types.InlineKeyboardButton(text='–ù–∞–∑–∞–¥',callback_data='itemmyphoto2')
        markup.add(item_my_photo3,item_my_photo2,item_my_photo1)
        bot.send_message(message.chat.id,f'üì∏ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å {message.from_user.first_name} –æ—Ç–ø—Ä–∞–≤–∏–ª –≤–∞–º 10 —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π –∏ 2 –≤–∏–¥–µ–æ:\n\n–ß—Ç–æ –±—ã –∏—Ö —É–≤–∏–¥–µ—Ç—å –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –µ–º—É –≤ –æ—Ç–≤–µ—Ç –ª—é–±—É—é —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—é –∏–ª–∏ –≤–∏–¥–µ–æ —Å –µ–≥–æ —É—á–∞—Å—Ç–∏–µ–º\n\n–û—Ç–ø—Ä–∞–≤—Ç–µ –∏—Ö –ø–æ –µ–≥–æ —Å—Å—ã–ª–∫–µ –∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É"–û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ –æ—Ç–≤–µ—Ç"',reply_markup=markup)
    elif message.text == 'üì® –û–ë–†–ê–¢–ù–ê–Ø –°–í–Ø–ó–¨':
        markup_info = types.InlineKeyboardMarkup(row_width=2)
        item_info1 = types.InlineKeyboardButton(text='üì¨ Support',callback_data='instagram_info',url='https://t.me/friendme_support')
        item_info2 = types.InlineKeyboardButton(text='üì¢ Telegram Group', callback_data='twitter_info',url='https://twitter.com/')
        markup_info.add(item_info1,item_info2)
        bot.send_message(message.chat.id,'<b>–û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å</b>\n\n–í —Å–ª—É—á–∞–µ –Ω–µ–∏—Å–ø—Ä–∞–≤–Ω–æ—Å—Ç–∏ –±–æ—Ç–∞ –∏–ª–∏ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –æ—à–∏–±–∫–µ , –ø—Ä–æ—Å—å–±–∞ –æ–±—Ä–∞—Ç–∏—Ç—Å—è –≤ –Ω–∞—à—É —Ç–µ—Ö-–ø–æ–¥–¥–µ—Ä–∂—É –ø–æ –∞–¥—Ä–µ—Å—É : @friendme_support\n\n–¢–∞–∫ –∂–µ –µ—Å–ª–∏ —É –≤–∞—Å —Å–µ—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –Ω–∞—à–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ ,–º–æ–∂–µ—Ç–µ –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –ø–æ –∞–¥—Ä–µ—Å—É : @friendme_offers\n\n<b>FriendMe –≤ —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–µ—Ç—è—Ö:</b>',parse_mode='html',reply_markup=markup_info)
    elif message.text == '‚õìÔ∏è –û–¢–ü–†–ê–í–ò–¢–¨ –°–°–´–õ–ö–£ –î–†–£–ì–£':
        markup = types.InlineKeyboardMarkup(row_width=1)
        item1 = types.InlineKeyboardButton(text='–ü–æ–¥–µ–ª–∏—Ç—å—Å—è –≤ Instagram Stories',callback_data='share1')
        item2 = types.InlineKeyboardButton('–ü–æ–¥–µ–ª–∏—Ç—å—Å—è –≤ Telegram',switch_inline_query=f'\n\nhttps://t.me/Friend_Me_bot?start={ref_id}')
        item3 = types.InlineKeyboardButton(text='–ü–æ–∫–∞–∑–∞—Ç—å —Å—Å—ã–ª–∫—É –≤ —á–∞—Ç–µ',callback_data='share3')
        markup.add(item1,item2,item3)
        bot.send_message(message.chat.id,'<b>‚§¥Ô∏è–ü–æ–¥–µ–ª–∏—Ç—å—Å—è —Å –¥—Ä—É–∑—å—è–º–∏ —É–¥–æ–±–Ω—ã–º –¥–ª—è –≤–∞—Å —Å–ø–æ—Å–æ–±–æ–º:</b>',parse_mode='html',reply_markup=markup)
    elif message.text == 'üìï –û –ù–ê–°':
        info_image = open('friendme_logo.jpg','rb')
        bot.send_photo(message.chat.id,info_image,caption='–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –Ω–∞—à–µ–º –±–æ—Ç–µ FriendMe, —Å–æ–∑–¥–∞–Ω–Ω–æ–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è –≤–∞—Å –∏ –≤–∞—à–∏—Ö –¥—Ä—É–∑–µ–π!\n\n–ú—ã –ø–æ–Ω–∏–º–∞–µ–º, —á—Ç–æ –ø–æ–¥–µ–ª–∏—Ç—å—Å—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º–∏ —Å –±–ª–∏–∑–∫–∏–º–∏ –ª—é–¥—å–º–∏ - —ç—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ –ø—Ä–∏—è—Ç–Ω–æ. –ü–æ—ç—Ç–æ–º—É –º—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–ª–∏ —ç—Ç–æ–≥–æ –±–æ—Ç–∞, —á—Ç–æ–±—ã —Å–¥–µ–ª–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å –æ–±–º–µ–Ω–∞ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º–∏ –µ—â–µ –±–æ–ª–µ–µ —É–¥–æ–±–Ω—ã–º –∏ –ø—Ä–∏—è—Ç–Ω—ã–º –¥–ª—è –≤–∞—Å.\n\n–ü–æ—ç—Ç–æ–º—É —á—Ç–æ –±—ã –ø–æ–ª—É—á–∏—Ç—å –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π –æ—Ç –≤–∞—à–∏—Ö –¥—Ä—É–∑–µ–π ,—Ä–æ–¥—Å—Ç–≤–µ–Ω–Ω–∏–∫–æ–≤ –∏–ª–∏ –∂–µ –∫–æ–ª–µ–≥  —Å –ª—é–±–æ–≥–æ —Ä–æ–¥–∞ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è . –í–∞–º –ø—Ä–∏–¥–µ—Ç—Å—è –ª–µ–≥–∫–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É –∏ –ø–æ–¥–µ–ª–∏—Ç—å—Å—è –µ–π –ª—é–±—ã–º —É–¥–æ–±–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º\n\n–ú—ã –Ω–∞—Ü–µ–ª–µ–Ω—ã –Ω–∞ –≤–∞—à–µ —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω–∏–µ, –ø–æ—ç—Ç–æ–º—É –ø–æ—Å—Ç–æ—è–Ω–Ω–æ —Ä–∞–±–æ—Ç–∞–µ–º –Ω–∞–¥ —É–ª—É—á—à–µ–Ω–∏–µ–º –∏ —Å–æ–≤–µ—Ä—à–µ–Ω—Å—Ç–≤–æ–≤–∞–Ω–∏–µ–º –Ω–∞—à–µ–≥–æ –±–æ—Ç–∞. –ú—ã —Å—Ç—Ä–µ–º–∏–º—Å—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –≤–∞–º —Å–∞–º—ã–π –ø—Ä–∏—è—Ç–Ω—ã–π –∏ —É–¥–æ–±–Ω—ã–π –æ–ø—ã—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.\n\n–°–ø–∞—Å–∏–±–æ, —á—Ç–æ –≤—ã–±—Ä–∞–ª–∏ –Ω–∞—à–µ–≥–æ –±–æ—Ç–∞, –∏ –¥–∞—Ä–∏—Ç–µ —Å–≤–æ–∏–º –¥—Ä—É–∑—å—è–º –Ω–µ–∑–∞–±—ã–≤–∞–µ–º—ã–µ –º–æ–º–µ–Ω—Ç—ã –∏ —Ä–∞–¥–æ—Å—Ç—å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π. –ú—ã –Ω–∞–¥–µ–µ–º—Å—è, —á—Ç–æ –æ–Ω–æ —Å—Ç–∞–Ω–µ—Ç –≤–∞—à–∏–º –Ω–∞–¥–µ–∂–Ω—ã–º —Å–ø—É—Ç–Ω–∏–∫–æ–º –∏ –ø–æ–º–æ–∂–µ—Ç –≤–∞–º —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø—Ä–µ–∫—Ä–∞—Å–Ω—ã–µ –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏—è —Å –≤–∞—à–∏–º–∏ –±–ª–∏–∑–∫–∏–º–∏.')
@bot.message_handler(content_types=['photo'])
def photo(message):

    #–ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ –ë–î, –µ—Å–ª–∏ –∏—Ö –Ω–µ—Ç—É —Ç–æ —Å–æ–∑–¥–∞—ë–º
    User = auth_user(message.from_user.id, message.from_user.username)

    #–ü–æ–ª—É—á–∞–µ–º id –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–ø—Ä–∞–≤–∏–ª —Å—Å—ã–ª–∫—É
    ref_id = User[3]

    if ref_id == "None":
        return error_command(User[1])
    else:
        # –ü–æ–ª—É—á–∞–µ–º id —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏
        image_id = message.photo[-1].file_id
        date_image = datetime.datetime.now()
        from_id = message.from_user.id

        #–î–æ–±–∞–≤–ª—è–µ–º —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—é –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
        cursor = connect.cursor()
        cursor.execute("INSERT INTO images VALUES(?,?,?,?,?);", (None, image_id, from_id, ref_id,date_image))
        connect.commit()

        #–ü–æ–ª—É—á–∞–µ–º id –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∫–æ—Ç–æ—Ä–æ–º—É –æ—Ç–ø—Ä–∞–≤–∏–ª–∏ —Å—Å—ã–ª–∫—É
        cursor.execute(f"SELECT * FROM images WHERE id={cursor.lastrowid}")
        data = cursor.fetchone()

        get_receiver_id = data[3]
        get_image_id = data[1]

        #–û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
        bot.send_message(message.chat.id,f'‚úÖ –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞')
        #print("–û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é:", get_receiver_id)

        bot.send_photo(get_receiver_id, get_image_id)

@bot.callback_query_handler(func=lambda callback:callback.data)
def callback_my_photo(callback):
    User = auth_user(callback.message.chat.id, callback.from_user.username)

    ref_id = callback.message.chat.id

    if callback.data == 'itemmyphoto1':
       pass
    elif callback.data == 'itemmyphoto2':
        markup = types.InlineKeyboardMarkup(row_width=2)
        item_my_photo1 = types.InlineKeyboardButton(text='–û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ –æ—Ç–≤–µ—Ç',callback_data='itemmyphoto1')
        item_my_photo2 = types.InlineKeyboardButton(text='–î–∞–ª–µ–µ',callback_data='itemmyphoto2')
        item_my_photo3 = types.InlineKeyboardButton(text='–ù–∞–∑–∞–¥',callback_data='itemmyphoto2')
        markup.add(item_my_photo3,item_my_photo2,item_my_photo1)
        bot.edit_message_text(chat_id=callback.message.chat.id,message_id=callback.message.id,text=f'üì∏ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å {callback.message.from_user.first_name} –æ—Ç–ø—Ä–∞–≤–∏–ª –≤–∞–º 15 —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π –∏ 5 –≤–∏–¥–µ–æ:\n\n–ß—Ç–æ –±—ã –∏—Ö —É–≤–∏–¥–µ—Ç—å –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –µ–º—É –≤ –æ—Ç–≤–µ—Ç –ª—é–±—É—é —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—é –∏–ª–∏ –≤–∏–¥–µ–æ —Å –µ–≥–æ —É—á–∞—Å—Ç–∏–µ–º\n\n–û—Ç–ø—Ä–∞–≤—Ç–µ –∏—Ö –ø–æ –µ–≥–æ —Å—Å—ã–ª–∫–µ –∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É"–û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ –æ—Ç–≤–µ—Ç"',reply_markup=markup)
    elif callback.data == 'itemmyphoto3':
        markup = types.InlineKeyboardMarkup(row_width=2)
        item_my_photo1 = types.InlineKeyboardButton(text='–û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ –æ—Ç–≤–µ—Ç', callback_data='itemmyphoto1')
        item_my_photo2 = types.InlineKeyboardButton(text='–î–∞–ª–µ–µ', callback_data='itemmyphoto2')
        item_my_photo3 = types.InlineKeyboardButton(text='–ù–∞–∑–∞–¥', callback_data='itemmyphoto2')
        markup.add(item_my_photo3, item_my_photo2, item_my_photo1)
        bot.edit_message_text(chat_id=callback.message.chat.id, message_id=callback.message.id,text=f'üì∏ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å {callback.message.from_user.first_name} –æ—Ç–ø—Ä–∞–≤–∏–ª –≤–∞–º 10 —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π –∏ 2 –≤–∏–¥–µ–æ:\n\n–ß—Ç–æ –±—ã –∏—Ö —É–≤–∏–¥–µ—Ç—å –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –µ–º—É –≤ –æ—Ç–≤–µ—Ç –ª—é–±—É—é —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—é –∏–ª–∏ –≤–∏–¥–µ–æ —Å –µ–≥–æ —É—á–∞—Å—Ç–∏–µ–º\n\n–û—Ç–ø—Ä–∞–≤—Ç–µ –∏—Ö –ø–æ –µ–≥–æ —Å—Å—ã–ª–∫–µ –∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É"–û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ –æ—Ç–≤–µ—Ç"',reply_markup=markup)
    elif callback.data == 'share1':
        markup = types.InlineKeyboardMarkup()
        item_next = types.InlineKeyboardButton(text='–î–∞–ª–µ–µ',callback_data='item_next1')
        markup.add(item_next)
        image = open('inst.jpg', 'rb')
        bot.send_photo(callback.message.chat.id, image)
        bot.send_message(callback.message.chat.id,'–î–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤—ã–ª–æ–∂–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é —Å —Å—Å—ã–ª–∫–æ–π –≤ <b>Instagram stories</b>,–≤–∞–º –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –≤—ã–ø–æ–ª–Ω–∏—Ç—å 3 –ø—Ä–æ—Å—Ç—ã—Ö –¥–µ–π—Å—Ç–≤–∏—è –∏ –∂–¥–∏—Ç–µ –æ–∫–µ–∞–Ω —Ñ–æ—Ç–æ –æ—Ç —Å–≤–æ–∏—Ö –¥—Ä—É–∑–µ–π üòÅ',parse_mode='html',reply_markup=markup)
    elif callback.data == 'share2':
        bot.send_message(callback.message.chat.id,'')
    elif callback.data == 'share3':
        bot.send_message(callback.message.chat.id, f'https://t.me/Friend_Me_bot?start={ref_id}')
    elif callback.data == 'item_next1':
       markup = types.InlineKeyboardMarkup()
       item_next = types.InlineKeyboardButton(text='–î–∞–ª–µ–µ', callback_data='item_next2')
       markup.add(item_next)
       bot.edit_message_text(chat_id=callback.message.chat.id, message_id=callback.message.message_id, text="1Ô∏è‚É£–°–∫–∞—á–∞–π—Ç–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—é –∫–æ—Ç–æ—Ä—É—é –º—ã –æ—Ç–ø—Ä–∞–≤–∏–ª–∏ –Ω–∏–∂–µ, –ø–æ—Å–ª–µ –Ω–∞–∂–º–∏—Ç–µ –¥–∞–ª–µ–µ",reply_markup=markup)
    elif callback.data == 'item_next2':
        markup = types.InlineKeyboardMarkup()
        item_next = types.InlineKeyboardButton(text='–î–∞–ª–µ–µ', callback_data='item_next3')
        markup.add(item_next)
        bot.edit_message_text(chat_id=callback.message.chat.id, message_id=callback.message.message_id,text="2Ô∏è‚É£–û—Ç–∫—Ä–æ–π—Ç–µ –≤–∫–ª–∞–¥–∫—É –∏—Å—Ç–æ—Ä–∏–∏ –∏ –∑–∞–≥—Ä—É–∑–∏—Ç–µ —ç—Ç–æ —Ñ–æ—Ç–æ, –ø–æ—Å–ª–µ –Ω–∞–∂–º–∏—Ç–µ –¥–∞–ª–µ–µ",reply_markup=markup)
    elif callback.data == 'item_next3':
        markup = types.InlineKeyboardMarkup()
        item_next = types.InlineKeyboardButton(text='–ü–æ–¥–µ–ª–∏—Ç—å—Å—è', callback_data='item_share4')
        markup.add(item_next)
        bot.edit_message_text(chat_id=callback.message.chat.id, message_id=callback.message.message_id,text=f"3Ô∏è‚É£–î–æ–±–∞–≤—å—Ç–µ —Å—Å—ã–ª–∫—É –∫–æ—Ç–æ—Ä—É—é –º—ã –æ—Ç–ø—Ä–∞–≤–∏–ª–∏ –Ω–∏–∂–µ –≤ —Ä–∞–º–∫—É –ø–æ—Å–µ—Ä–µ–¥–∏–Ω–µ –∫–∞–∫ –Ω–∞ —Å–∫—Ä–∏–Ω—à–æ—Ç–µ‚§µÔ∏è\n\nhttps://t.me/Friend_Me_bot?start={ref_id}",reply_markup=markup)

def error_command (chat_id:numbers):
    return bot.send_message(chat_id,'<b>‚õî –ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞, –¥–∞–Ω–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞!</b>',parse_mode='html')

bot.polling(none_stop=True)